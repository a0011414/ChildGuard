# ChildGuard プロジェクト TODO

最終更新: 2026-02-26

---

## 進め方の順番（引き継ぎ.md §7）

| # | ステップ | 状態 | メモ |
|---|----------|------|------|
| 1 | 要件の整理 | 進行中 | 誰が・何を・どのルールで を箇条書きでまとめる（要件メモ.md） |
| 2 | 技術選定 | 進行中 | 当座は **iPhone（iOS）**。実装は **Swift** を想定。MCP/エージェントの載せ先は要検討。 |
| 3 | プロトタイプ | 進行中 | 最小単位（1ルール＋1制御）。親/子モードの骨組みはビルド済み。次はルールの保存。 |
| 4 | 会社の要否 | 保留 | 自宅用が形になってから「届けたい」が具体化した時点で判断（引き継ぎ.md §5 参照） |

---

## 製品方針

- **ルールをアプリ内で書き込んで保存し、そのルールに従って動くアプリ**にする（要件メモ.md「アプリの役割」参照）。

## 直近のタスク（プロトタイプ）

- [x] 親/子モード切り替えの骨組みを Xcode でビルド
- [x] **ルールの最小モデル** … 「1日〇分まで」のような1本のルールを表現する型を用意する
- [x] **親モードでルールを入力・保存** … いったん UserDefaults で保存（CloudKit はその次）
- [x] **子モードでルールを表示** … 保存されたルールを読み取り専用で表示
- [x] **「設定」または「このアプリについて」** … 免責・利用上の注意を入れる（実装前チェックで含める方針）
- [x] **CloudKit で保存・親→子共有（CKShare）** … ルールを CloudKit の private DB に保存。親モードで「子どもと共有」から ShareLink で URL を共有し、子側で URL を開くと共有を承諾してルールを反映。
- [ ] **Family Controls 申請** … 申請メモ.md に手順・下書きあり。フォームから送信後、承認されたら実装へ。
- [ ] （のちに）Family Controls 承認後、「〇時間超えそう」の検知＋親へ通知＋制限

## その他

- [ ] **要件メモ.md** の「誰が・何を・どのルールで」を具体化する（必要なら家族で話し合い）
- [ ] **技術選定**の続き: MCP/エージェントをどこに載せるか（端末内／自宅サーバ／クラウド等）を決める

---

## 次に考えること（順不同でよい）

1. **プロトタイプの「最小単位」を決める**  
   「1ルール＋1制御」を具体的に。例：親が「1日〇時間まで」と1本だけルールを書く → 子の iPhone でそのルールが効く、まで動かす。

2. **iOS で「制御」をどう実現するか**  
   第三者がアプリの利用時間を止めたり制限したりするには、Apple の **Family Controls / ManagedSettings / DeviceActivity** 等の API が前提になりそう。使える範囲・制約を調べ、技術メモに書いておく。

3. **MCP（エージェント）の載せ先**  
   ルールは iCloud に置く方針済み。では「ルールを解釈して制御をかける」部分は、子の iPhone 内か・親の iPhone か・サーバか。iOS の仕様（制限は子の端末側でかける等）と合わせて決める。

4. **最初に実現するルールを1つに絞る**  
   要件メモのルール例のうち、プロトタイプではどれを最初に実装するか（例：利用時間の「1日〇時間まで」だけ）を決めると、設計がしやすい。

---

## 参照

- **会社を作るか**: 引き継ぎ.md の「5. 判断のフローチャート・ポイント」を参照。
- **スコープ**: 自宅だけで使えればよい・金儲け不要。必要なら会社も検討。
